<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:SFP_UI.ViewModels"
             x:Class="SFP_UI.Pages.MainPage"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             x:DataType="vm:MainPageViewModel">
    <Panel>
        <ui:TeachingTip IsLightDismissEnabled="False"
                        Title="An update is available!"
                        ActionButtonContent="View Update"
                        CloseButtonContent="Dismiss"
                        PreferredPlacement="Center"
                        Name="UpdateNotification"
                        ActionButtonCommand="{Binding UpdateNotificationViewCommand}"
                        ActionButtonCommandParameter="https://github.com/PhantomGamers/SFP/releases/latest"
                        Content="{Binding UpdateNotificationContent}"
                        IsOpen="{Binding UpdateNotificationIsOpen}" />
        <Grid>
            <DockPanel Margin="16">
                <DockPanel DockPanel.Dock="Bottom" Margin="15 0 0 0">
                    <Button HorizontalAlignment="Left"
                            Margin="0 0 10 0"
                            IsEnabled="{Binding ButtonsEnabled}"
                            Command="{Binding InjectCommand}"
                            IsVisible="{Binding !IsInjected}"
                            ToolTip.Tip="Attaches to Steam instance, enabling skin and scripting support based on your settings">
                        Start Injection
                    </Button>

                    <Button HorizontalAlignment="Left"
                            Margin="0 0 10 0"
                            IsEnabled="{Binding ButtonsEnabled}"
                            Command="{Binding StopInjectCommand}"
                            IsVisible="{Binding IsInjected}"
                            ToolTip.Tip="Detaches from Steam instance, some elements may persist until Steam is restarted">
                        Stop Injection
                    </Button>

                    <Button Margin="0 0 15 0"
                            HorizontalAlignment="Right"
                            IsEnabled="{Binding ButtonsEnabled}"
                            Command="{Binding StartSteamCommand}"
                            ToolTip.Tip="Starts or restarts Steam with the arguments given in settings"
                            Content="{Binding StartSteamText}" />

                    <DropDownButton Content="Open file"
                                    HorizontalAlignment="Right"
                                    Margin="0 0 15 0">
                        <DropDownButton.Flyout>
                            <MenuFlyout Placement="Top">
                                <MenuItem Header="steamui"
                                          ToolTip.Tip="Opens the steamui folder, the root for your custom scripts and skins"
                                          Command="{Binding OpenDirCommand}"
                                          CommandParameter="" />
                                <Separator/>
                                <MenuItem Header="libraryroot.custom.css"
                                          ToolTip.Tip="Opens the libraryroot.custom.css file for your custom skin for the Steam client"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="libraryroot.custom.css" />
                                <MenuItem Header="friends.custom.css"
                                          ToolTip.Tip="Opens the friends.custom.css file for your custom skin for the friends list"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="friends.custom.css" />
                                <MenuItem Header="webkit.css"
                                          ToolTip.Tip="Opens the webkit.css file for your custom skin for the Steam site"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="webkit.css" />
                                <MenuItem Header="bigpicture.custom.css"
                                          ToolTip.Tip="Opens the bigpicture.custom.css file for your custom skin for big picture mode"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="bigpicture.custom.css" />
                                <Separator/>
                                <MenuItem Header="libraryroot.custom.js"
                                          ToolTip.Tip="Opens the libraryroot.custom.js file for your custom script for the Steam client"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="libraryroot.custom.js" />
                                <MenuItem Header="friends.custom.js"
                                          ToolTip.Tip="Opens the friends.custom.js file for your custom script for the friends list"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="friends.custom.js" />
                                <MenuItem Header="webkit.js"
                                          ToolTip.Tip="Opens the webkit.js file for your custom script for the Steam site"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="webkit.js" />
                                <MenuItem Header="bigpicture.custom.js"
                                          ToolTip.Tip="Opens the bigpicture.custom.js file for your custom script for big picture mode"
                                          Command="{Binding OpenFileCommand}"
                                          CommandParameter="bigpicture.custom.js" />
                            </MenuFlyout>
                        </DropDownButton.Flyout>
                    </DropDownButton>
                </DockPanel>
                <Border BorderThickness="5">
                    <ScrollViewer Margin="10">
                        <TextBox Name="Output"
                                 CaretIndex="{Binding CaretIndex}"
                                 BorderThickness="0"
                                 Focusable="False"
                                 IsReadOnly="True"
                                 TextWrapping="Wrap"
                                 IsTabStop="False"
                                 Text="{Binding Output, Mode=OneWay}" />
                    </ScrollViewer>
                </Border>
            </DockPanel>
            <Border />
        </Grid>
    </Panel>
</UserControl>
